<form method="post" action="" class="yform">
<fieldset>
<legend>$region.label</legend>

#if( $region.showPreviousNextButtons )
<div id="${region.name}Navigation" class="type-button">
	<input type="button" value="Previous" id="previous$region.view.name" onclick="return nav_${region.view.name}(-1);" name="buttonPrevious" />
	<input type="button" value="Next" id="next$region.view.name" onclick="return nav_${region.view.name}(1);" name="buttonNext" />
</div>
#end

#foreach ($field in $region.visibleFields)
	#if($field.editable)
		<div class="type-text">
			<label for="$field.name">$field.label</label>
			<input type="text" name="$field.name" id="$field.name" size="20" 
				onchange="rows_${region.view.name}.DATA[rows_${region.view.name}.POSITION].FIELDS.${field.name} = $(this).val(); rows_${region.view.name}.DATA[rows_${region.view.name}.POSITION].DIRTY = true;" />
		</div>
	#{else}
		<div class="type-text">
			<label for="$field.name">$field.label</label>
			<span id="$field.name"></span>
		</div>
	#end
#end
</fieldset>
</form>

<script type="text/javascript">
#if( $region.regionType.formRegion )
	function paintButtons_${region.name}() {
		var rows = rows_${region.view.name};
		if ($(rows).length > 0) {
			$('#previous${region.view.name}').attr("disabled", (rows.POSITION == 0));
			$('#next${region.view.name}').attr("disabled", (rows.POSITION == rows.DATA.length - 1));
		} else {
			$('#previous${region.view.name}').attr("disabled", true);
			$('#next${region.view.name}').attr("disabled", true);
		}
	}

	function paint_${region.name}() {
		paintButtons_${region.name}();
		
		var row = rows_${region.view.name}.DATA[rows_${region.view.name}.POSITION];
		
		#foreach ( $field in $region.fields )
			#if($field.editable)
				$("#$region.name").find('#${field.name}').val(row.FIELDS.${field.name});
			#{else}
				$("#$region.name").find('#${field.name}').html(row.FIELDS.${field.name});
			#end
		#end
	}
#end
</script>
